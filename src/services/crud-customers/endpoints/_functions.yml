#function para cadastro de customer
createUser:
  warmup: true
  handler: src/services/crud-customers/endpoints/createUser.handler
  environment:
    SNS_TOPIC_CUSTOMER_CREATE:
      Fn::ImportValue: ${self:custom.stage}:${self:service}-infra:customersCreateEventsTopicArn
  iamRoleStatements:
    - Effect: "Allow"
      Resource:
        Fn::ImportValue: ${self:custom.stage}:${self:service}-infra:customersCreateEventsTopicArn
      Action:
        - sns:Publish
  events:
    - http:
        path: /users
        method: post

#function para a listagem de customers
findUsers:
  warmup: true
  handler: src/services/crud-customers/endpoints/findUsers.handler
  events:
    - http:
        path: /users
        method: get

#function para a bsca de um unico customer
findOneUser:
  warmup: true
  handler: src/services/crud-customers/endpoints/findOneUser.handler
  events:
    - http:
        path: /users/{id}
        method: get

#function para atulaizar customer
updateUser:
  warmup: true
  handler: src/services/crud-customers/endpoints/updateUser.handler
  environment:
    SNS_TOPIC_CUSTOMER_UPDATE:
      Fn::ImportValue: ${self:custom.stage}:${self:service}-infra:customersUpdateEventsTopicArn
  iamRoleStatements:
    - Effect: "Allow"
      Resource:
        Fn::ImportValue: ${self:custom.stage}:${self:service}-infra:customersUpdateEventsTopicArn
      Action:
        - sns:Publish
  events:
    - http:
        path: /users/{id}
        method: put

#function para deletar customers
deleteUser:
  warmup: true
  handler: src/services/crud-customers/endpoints/deleteUser.handler
  events:
    - http:
        path: /users/{id}
        method: delete
